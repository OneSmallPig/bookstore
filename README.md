# 百变书屋 - 私人智能图书馆

一个基于AI技术的智能图书推荐和阅读平台，为用户提供个性化的阅读体验。

## 项目进度

### 第一阶段（已完成）

#### 前端部分 ✅
- 创建了主页面布局和样式
- 实现了响应式设计
- 配置了Tailwind CSS和Alpine.js
- 解决了样式编译问题
- 完成了主要页面的UI设计：
  - 首页布局
  - 书籍展示卡片
  - 分类导航
  - 用户界面组件

#### 数据库部分 ✅
- 完成数据库设计
  - 用户模型（User）
  - 书籍模型（Book）
  - 书架模型（Bookshelf）
- 实现数据库配置和连接
- 创建数据库初始化脚本
- 配置模型关联关系

### 第二阶段（大部分完成）

#### 前后端集成 🔄
- [x] 用户认证界面
  - [x] 登录页面与API对接
  - [x] 注册页面与API对接
  - [x] 密码重置功能
- [x] 书籍展示功能
  - [x] 主页书籍列表数据加载
  - [x] 书籍详情页面
  - [x] 分类筛选功能
- [x] 书架管理功能
  - [x] "添加到书架"功能
  - [x] 书架页面数据展示
  - [ ] 阅读进度管理

#### 导航和路由 ✅
- [x] 统一的导航栏设计
- [x] 页面间跳转逻辑
- [x] 用户状态管理
- [x] 权限控制

#### 数据初始化 🔄
- [x] 创建示例数据
  - [x] 书籍数据
  - [x] 用户数据
  - [x] 分类数据
- [ ] 实现数据迁移
- [ ] 添加数据备份机制

#### 功能测试 🔄
- [x] API基础测试
- [ ] 前端单元测试
- [ ] 集成测试
- [ ] 性能测试

#### Bug修复和UI优化 ✅
- [x] 修复登录认证问题
- [x] 优化登录和注册页面UI
- [x] 修复用户界面样式不一致问题
- [x] 修复导航和路由问题

### 第三阶段（进行中）

#### 阅读器功能开发 🔄
- [ ] 在线阅读器实现
  - [ ] 基本阅读功能
  - [ ] 页面滚动/翻页
  - [ ] 字体大小调整
  - [ ] 阅读进度保存
- [ ] 阅读统计
  - [ ] 阅读时长记录
  - [ ] 阅读进度分析
  - [ ] 阅读习惯建议

#### 社区功能 🔄
- [x] 社区页面设计
- [ ] 评论系统实现
  - [ ] 发表评论
  - [ ] 回复评论
  - [ ] 评论点赞
- [ ] 读书笔记功能
  - [ ] 创建笔记
  - [ ] 分享笔记
  - [ ] 查看他人笔记

#### AI功能集成 ⏳
- [ ] OpenAI API集成
- [ ] 智能推荐系统
- [ ] 个性化阅读建议
- [ ] 基于阅读历史的推荐

### 下一阶段规划（第四阶段）

#### 搜索功能优化（预计2周）
- [ ] 高级搜索功能
  - [ ] 多条件组合搜索
  - [ ] 搜索结果过滤
  - [ ] 搜索结果排序
- [ ] 搜索体验提升
  - [ ] 搜索建议
  - [ ] 搜索历史记录
  - [ ] 热门搜索展示
- [ ] 语义搜索实现
  - [ ] AI驱动搜索结果优化
  - [ ] 相关性排序算法

#### 用户体验提升（预计1-2周）
- [ ] 性能优化
  - [ ] 懒加载实现
  - [ ] 图片优化
  - [ ] 代码压缩和分割
- [ ] 交互体验增强
  - [ ] 页面加载动画
  - [ ] 平滑过渡效果
  - [ ] 微交互优化
- [ ] 用户引导
  - [ ] 新用户引导流程
  - [ ] 功能提示
  - [ ] 用户帮助中心

#### 数据分析模块（预计2周）
- [ ] 用户行为分析
  - [ ] 页面访问统计
  - [ ] 停留时间分析
  - [ ] 转化率分析
- [ ] 阅读数据统计
  - [ ] 热门书籍排行
  - [ ] 用户阅读喜好
  - [ ] 阅读趋势分析
- [ ] 管理员数据看板
  - [ ] 用户增长数据
  - [ ] 内容使用数据
  - [ ] 系统性能数据

#### 改进计划任务（持续进行）
- [ ] 响应式设计优化
  - [ ] 完善移动端适配
  - [ ] 平板设备优化
  - [ ] 大屏幕适配
- [ ] 无障碍功能
  - [ ] 屏幕阅读器支持
  - [ ] 键盘导航支持
  - [ ] 高对比度模式
- [ ] 国际化支持
  - [ ] 多语言界面
  - [ ] 本地化内容

## 当前迭代任务详情（第三阶段）

### 阅读器模块
1. **在线阅读器开发**
   - 实现基本阅读视图
   - 添加阅读控制功能（字号、背景等）
   - 实现页面标记和书签
   - 集成进度同步功能

2. **阅读数据记录**
   - 记录阅读时长
   - 保存阅读进度
   - 生成阅读报告

3. **离线阅读支持**
   - 实现内容缓存
   - 添加离线模式提示
   - 同步离线阅读数据

### 社区互动
1. **评论系统**
   - 设计评论数据模型
   - 实现评论发布功能
   - 添加评论管理功能
   - 集成举报和审核机制

2. **读书笔记**
   - 设计笔记编辑器
   - 实现笔记共享功能
   - 添加笔记检索功能
   - 集成笔记推荐系统

3. **社交功能**
   - 添加用户关注功能
   - 实现阅读活动分享
   - 设计社交互动奖励机制

### AI功能集成
1. **智能推荐**
   - 接入OpenAI API
   - 开发基于内容的推荐算法
   - 实现基于用户行为的推荐
   - 设计推荐结果展示UI

2. **智能助手**
   - 开发AI聊天助手
   - 实现阅读理解辅助
   - 添加内容总结功能
   - 提供个性化阅读建议

## 功能测试指南

### 本地测试环境搭建

1. **启动前端开发服务器**
```bash
cd web
npm run dev
# 访问 http://localhost:3000
```

2. **启动API服务器**
```bash
cd server
npm run dev
# API服务运行在 http://localhost:3001
```

3. **数据库准备**
```bash
# 确保数据库已初始化
cd web
npm run init-db
```

### 测试用户账号
- 邮箱: test@example.com
- 密码: test123
- 用户名: testuser

### 功能测试流程

#### 用户认证测试
1. 访问登录页面 `/src/pages/login.html`
2. 使用测试账号登录
3. 验证登录状态保持
4. 测试注册功能
5. 测试密码重置功能

#### 书籍展示测试
1. 访问首页，验证书籍列表加载
2. 点击书籍卡片，验证详情页面
3. 测试分类筛选功能
4. 验证推荐算法

#### 书架管理测试
1. 登录后访问书架页面
2. 测试添加书籍到书架
3. 测试移除书籍
4. 测试更新阅读状态
5. 验证阅读进度保存

#### API测试
1. 使用Postman或类似工具测试API端点
2. 验证认证流程
3. 测试书籍相关API
4. 测试用户相关API
5. 测试书架相关API

### UI设计规范

**重要提示：所有页面必须严格按照`model`文件夹下的原型文件进行实现**

1. 使用MCP工具查看原型文件样式：
```bash
# 启动开发服务器
cd model
npx serve
# 访问 http://localhost:5000
```

2. 使用MCP工具进行页面比对：
   - 截取原型页面截图
   - 截取实现页面截图
   - 对比差异并调整

3. 设计规范要点：
   - 颜色方案必须与原型一致
   - 组件间距与原型保持一致
   - 响应式布局必须符合原型设计
   - 交互效果（悬停、点击等）必须实现

## 已知问题与解决进度

### 界面问题
- [x] 导航栏样式统一问题
- [x] 登录表单验证错误消息不清晰
- [x] 个人资料按钮点击无法正确跳转
- [x] 登录页面自动填充问题
- [ ] 移动端菜单折叠问题
- [ ] 书籍详情页布局在小屏幕上显示异常

### 功能问题
- [x] 登录认证失败（已修复：邮箱字段问题）
- [ ] 书架同步延迟问题
- [ ] 搜索结果偶尔不精确
- [ ] 阅读进度同步失败
- [ ] 部分API返回错误格式不统一

### 性能问题
- [ ] 首页加载时间过长
- [ ] 大量图片导致页面卡顿
- [ ] API响应时间不稳定
- [ ] 移动端性能优化不足

## 技术栈

### 前端
- HTML5/CSS3/JavaScript
- Tailwind CSS：原子化CSS框架
- Alpine.js：轻量级JavaScript框架
- Font Awesome：图标库

### 后端
- Node.js + Express：后端框架
- MySQL：关系型数据库
- Sequelize：ORM框架
- JWT：用户认证
- OpenAI API：AI推荐功能

## 本地开发环境搭建

### 前置要求
- Node.js >= 18
- MySQL >= 8.0
- Git

### 启动步骤

1. **克隆项目**
```bash
git clone https://github.com/OneSmallPig/bookstore.git
cd bookstore
```

2. **前端环境配置**
```bash
cd web
npm install
npm run build:css  # 编译Tailwind CSS
npm run dev  # 启动前端开发服务器
```

3. **后端环境配置**
```bash
cd server
npm install
cp .env.example .env  # 复制环境变量文件
# 编辑.env文件，设置数据库连接信息
npm run dev  # 启动API服务器
```

4. **数据库配置**
```bash
# 在MySQL中创建数据库
mysql -u root -p
CREATE DATABASE versatile_bookstore;
```

5. **初始化数据库**
```bash
cd server
npm run db:init
```

## 开发规范

### 代码规范
- 使用ESLint和Prettier保持代码风格一致
- 保持代码注释完整
- 遵循组件化开发原则

### Git工作流
- 主分支：main
- 开发分支：dev
- 功能分支：feature/*
- 修复分支：hotfix/*

### 提交规范
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式化
- refactor: 代码重构

## 贡献指南

如果您想为项目做出贡献，请遵循以下步骤：

1. Fork本仓库
2. 创建您的功能分支 (`git checkout -b feature/amazing-feature`)
3. 提交您的修改 (`git commit -m 'feat: add amazing feature'`)
4. 推送到您的分支 (`git push origin feature/amazing-feature`)
5. 开启一个Pull Request

## 团队成员

- 项目负责人：OneSmallPig
- 前端开发：待添加
- 后端开发：待添加
- UI设计：待添加
- 测试：待添加 